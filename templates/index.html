<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SITME</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    
    <link rel="icon" href="../static/faviconV4.png" type="image/png">
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>SITME</h1>
            <p class="subtitle">Sistema Integral de Tamizaje Multimodal para Endometriosis &copy; 2025</p>
            <div class="clinic-id">
                <i class="fas fa-id-card" aria-hidden="true"></i> ID Clínico: ENDO-<span id="clinicId">0000</span>
            </div>
        </header>
        
        <div class="form-container">
            <form id="endometriosisForm">
                <!-- Sección 1: Identificación del Paciente -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-user-circle"></i> Datos de Identificación</h2>
                    <p class="section-subtitle">Complete la información básica del paciente según registro clínico</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="full_name" class="required">Nombre completo</label>
                            <input type="text" id="full_name" name="full_name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="rut">RUT</label>
                            <input type="text" id="rut" name="rut" 
                                   pattern="\d{7,8}-[\dkK]"
                                   placeholder="12345678-9"
                                   maxlength="10">
                            <div id="rut-error" class="error-message" style="display: none;"></div>
                        </div>

                        <div class="form-group">
                            <label for="birth_date" class="required">Fecha de nacimiento</label>
                            <input type="date" id="birth_date" name="birth_date" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="age">Edad</label>
                            <input type="number" id="age" name="age" min="15" max="50" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="blood_type">Tipo de sangre</label>
                            <select id="blood_type" name="blood_type">
                                <option value="">Seleccionar</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="required">Previsión</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="insurance" name="insurance" value="fonasa" required>
                                    <label for="insurance_fonasa">Fonasa</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="insurance" name="insurance" value="isapre">
                                    <label for="insurance_isapre">Isapre</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sección 2: Antecedentes Médicos -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-medical-record"></i> Antecedentes Médicos</h2>
                    <p class="section-subtitle">Historial clínico relevante para la evaluación de endometriosis</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Antecedentes ginecológicos</label>
                            <div class="checkbox-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="gynecological_surgery" name="gynecological_surgery">
                                    <label for="gynecological_surgery">Cirugías ginecológicas</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="pelvic_inflammatory" name="pelvic_inflammatory">
                                    <label for="pelvic_inflammatory">Enfermedad inflamatoria pélvica</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="ovarian_cysts" name="ovarian_cysts">
                                    <label for="ovarian_cysts">Quistes ováricos recurrentes</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Antecedentes familiares</label>
                            <div class="checkbox-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="family_endometriosis" name="family_endometriosis">
                                    <label for="family_endometriosis">Endometriosis</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="family_autoimmune" name="family_autoimmune">
                                    <label for="family_autoimmune">Enfermedades autoinmunes</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="family_cancer" name="family_cancer">
                                    <label for="family_cancer">Cáncer ginecológico</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Comorbilidades</label>
                            <div class="checkbox-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="comorbidity_autoimmune" name="comorbidity_autoimmune">
                                    <label for="comorbidity_autoimmune">Enfermedad autoinmune</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="comorbidity_thyroid" name="comorbidity_thyroid">
                                    <label for="comorbidity_thyroid">Trastorno tiroideo</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="comorbidity_ibs" name="comorbidity_ibs">
                                    <label for="comorbidity_ibs">Síndrome de intestino irritable</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="medications">Medicamentos actuales</label>
                            <textarea id="medications" name="medications" rows="3" placeholder="Lista de medicamentos, dosis y frecuencia"></textarea>
                        </div>
                    </div>
                </div>
                
                <!-- Sección 3: Historia Menstrual -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-calendar-alt"></i> Historial Menstrual</h2>
                    <p class="section-subtitle">Características del ciclo menstrual y síntomas asociados</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="menarche_age" class="required">Edad de la menarquia</label>
                            <input type="number" id="menarche_age" name="menarche_age" min="8" max="20" required>
                            <div class="normal-range">Rango normal: 10-14 años</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="cycle_length" class="required">Duración del ciclo (días)</label>
                            <input type="number" id="cycle_length" name="cycle_length" min="15" max="45" required>
                            <div class="normal-range">Rango normal: 21-35 días</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="period_duration" class="required">Duración del sangrado (días)</label>
                            <input type="number" id="period_duration" name="period_duration" min="1" max="15" required>
                            <div class="normal-range">Rango normal: 3-7 días</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="last_period" class="required">Última menstruación</label>
                            <input type="date" id="last_period" name="last_period" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="pain_level" class="required">Dolor menstrual (1-10)</label>
                            <input type="range" id="pain_level" name="pain_level" min="1" max="10" value="1" required>
                            <div class="pain-scale">
                                <span class="pain-scale-label">1</span>
                                <span class="pain-scale-label">2</span>
                                <span class="pain-scale-label">3</span>
                                <span class="pain-scale-label">4</span>
                                <span class="pain-scale-label">5</span>
                                <span class="pain-scale-label">6</span>
                                <span class="pain-scale-label">7</span>
                                <span class="pain-scale-label">8</span>
                                <span class="pain-scale-label">9</span>
                                <span class="pain-scale-label">10</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Características del dolor</label>
                            <div class="checkbox-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="pain_premenstrual" name="pain_premenstrual">
                                    <label for="pain_premenstrual">Premenstrual</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="pain_menstrual" name="pain_menstrual">
                                    <label for="pain_menstrual">Durante menstruación</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="pain_ovulation" name="pain_ovulation">
                                    <label for="pain_ovulation">Durante ovulación</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="pain_chronic" name="pain_chronic">
                                    <label for="pain_chronic">Crónico/pélvico</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sección 4: Síntomas Actuales -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-heartbeat"></i> Síntomas Actuales</h2>
                    <p class="section-subtitle">Síntomas característicos de endometriosis según guías clínicas</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="required">Dolor durante/después de relaciones sexuales</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="pain_during_sex_yes" name="pain_during_sex" value="1" required>
                                    <label for="pain_during_sex_yes">Sí</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="pain_during_sex_no" name="pain_during_sex" value="0">
                                    <label for="pain_during_sex_no">No</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="required">Síntomas intestinales cíclicos</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="bowel_symptoms_yes" name="bowel_symptoms" value="1" required>
                                    <label for="bowel_symptoms_yes">Sí</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="bowel_symptoms_no" name="bowel_symptoms" value="0">
                                    <label for="bowel_symptoms_no">No</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="required">Síntomas urinarios cíclicos</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="urinary_symptoms_yes" name="urinary_symptoms" value="1" required>
                                    <label for="urinary_symptoms_yes">Sí</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="urinary_symptoms_no" name="urinary_symptoms" value="0">
                                    <label for="urinary_symptoms_no">No</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="required">Fatiga crónica</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="fatigue_yes" name="fatigue" value="1" required>
                                    <label for="fatigue_yes">Sí</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="fatigue_no" name="fatigue" value="0">
                                    <label for="fatigue_no">No</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Dificultades para concebir</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="infertility_yes" name="infertility" value="1">
                                    <label for="infertility_yes">Sí</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="infertility_no" name="infertility" value="0">
                                    <label for="infertility_no">No</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="infertility_na" name="infertility" value="0">
                                    <label for="infertility_na">No aplica</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="other_symptoms">Otros síntomas</label>
                            <textarea id="other_symptoms" name="other_symptoms" rows="3" placeholder="Descripción de otros síntomas relevantes"></textarea>
                        </div>
                    </div>
                </div>
                
                <!-- Sección 5: Biomarcadores y Exámenes -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-flask"></i> Biomarcadores y Exámenes</h2>
                    <p class="section-subtitle">Resultados de laboratorio relevantes para el diagnóstico de endometriosis</p>
                    
                    <div class="form-group">
                        <div class="biomarker-row">
                            <div class="form-group">
                                <label for="ca125">CA-125</label>
                                <div class="biomarker-value">
                                    <input type="number" id="ca125" name="ca125" step="0.1" min="0">
                                    <span class="biomarker-unit">U/mL</span>
                                </div>
                                <div class="normal-range">Normal: &lt;35 U/mL <span class="info-tooltip"><i class="fas fa-info-circle"></i><span class="tooltip-text">Puede estar elevado en endometriosis, pero también en otras condiciones ginecológicas</span></span></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="il6">IL-6</label>
                                <div class="biomarker-value">
                                    <input type="number" id="il6" name="il6" step="0.1" min="0">
                                    <span class="biomarker-unit">pg/mL</span>
                                </div>
                                <div class="normal-range">Normal: &lt;5 pg/mL</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="tnf_alpha">TNF-α</label>
                                <div class="biomarker-value">
                                    <input type="number" id="tnf_alpha" name="tnf_alpha" step="0.1" min="0">
                                    <span class="biomarker-unit">pg/mL</span>
                                </div>
                                <div class="normal-range">Normal: &lt;15 pg/mL</div>
                            </div>
                        </div>
                        
                        <div class="biomarker-row">
                            <div class="form-group">
                                <label for="vegf">VEGF</label>
                                <div class="biomarker-value">
                                    <input type="number" id="vegf" name="vegf" step="0.1" min="0">
                                    <span class="biomarker-unit">pg/mL</span>
                                </div>
                                <div class="normal-range">Normal: &lt;500 pg/mL</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="amh">Hormona Antimulleriana (AMH)</label>
                                <div class="biomarker-value">
                                    <input type="number" id="amh" name="amh" step="0.1" min="0">
                                    <span class="biomarker-unit">ng/mL</span>
                                </div>
                                <div class="normal-range">Normal: 1.0-4.0 ng/mL</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="crp">Proteína C Reactiva (PCR)</label>
                                <div class="biomarker-value">
                                    <input type="number" id="crp" name="crp" step="0.1" min="0">
                                    <span class="biomarker-unit">mg/L</span>
                                </div>
                                <div class="normal-range">Normal: &lt;10 mg/L</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="imaging">Resultados de imágenes</label>
                        <select id="imaging" name="imaging">
                            <option value="">Seleccionar</option>
                            <option value="normal">Normal</option>
                            <option value="endometrioma">Endometrioma(s) ovárico(s)</option>
                            <option value="adenomyosis">Adenomiosis sospechosa</option>
                            <option value="deep">Endometriosis profunda sospechosa</option>
                            <option value="other">Otros hallazgos</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="imaging_details">Detalles de estudios por imágenes</label>
                        <textarea id="imaging_details" name="imaging_details" rows="3" placeholder="Descripción de ecografía, resonancia u otros estudios"></textarea>
                    </div>
                </div>
                
                <!-- Sección 6: Evaluación Clínica -->
                <div class="form-section">
                    <h2 class="section-title"><i class="fas fa-stethoscope"></i> Evaluación Clínica</h2>
                    <p class="section-subtitle">Hallazgos del examen físico y evaluación ginecológica</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="height">Estatura</label>
                            <div class="biomarker-value">
                                <input type="number" id="height" name="height" min="100" max="250" placeholder="Ej. 165">
                                <span class="biomarker-unit">cm</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="weight">Peso</label>
                            <div class="biomarker-value">
                                <input type="number" id="weight" name="weight" min="30" max="200" step="0.1" placeholder="Ej. 65.5">
                                <span class="biomarker-unit">kg</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="bmi">IMC (Índice de Masa Corporal)</label>
                            <div class="biomarker-value">
                                <input type="number" id="bmi" name="bmi" step="0.1" min="10" max="50" readonly>
                            </div>
                            <div class="normal-range">Normal: &lt;18.5, &gt;24.9</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="pelvic_exam">Examen pélvico</label>
                            <select id="pelvic_exam" name="pelvic_exam">
                                <option value="">Seleccionar</option>
                                <option value="normal">Normal</option>
                                <option value="tenderness">Dolor a la movilización uterina</option>
                                <option value="nodules">Nódulos en ligamentos uterosacros</option>
                                <option value="fixed">Útero fijo/retroverso</option>
                                <option value="mass">Masa anexial</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="vaginal_exam">Examen vaginal</label>
                            <select id="vaginal_exam" name="vaginal_exam">
                                <option value="">Seleccionar</option>
                                <option value="normal">Normal</option>
                                <option value="tenderness">Dolor en fondos de saco</option>
                                <option value="nodules">Nódulos palpables</option>
                                <option value="other">Otros hallazgos</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="clinical_notes">Notas clínicas</label>
                            <textarea id="clinical_notes" name="clinical_notes" rows="3" placeholder="Observaciones relevantes del examen físico"></textarea>
                        </div>
                    </div>
                </div>
                
                <button type="submit"><i class="fas fa-heartbeat"></i> Evaluar Riesgo de Endometriosis</button>
            </form>
            
            <!-- Resultados -->
            <div id="resultContainer" class="result-container">
                <div class="result-header">
                    <div class="result-icon">
                        <i class="fas fa-exclamation-triangle" id="riskIcon"></i>
                    </div>
                    <div>
                        <h2 class="result-title" id="riskTitle">Resultado de la Evaluación</h2>
                        <p class="result-description" id="riskDescription"></p>
                    </div>
                </div>
                
                <div class="probability-container">
                    <div class="probability-circle" id="probabilityCircle">
                        0%
                    </div>
                    <div class="result-details">
                        <h3>Probabilidad de Endometriosis</h3>
                        <p id="probabilityText"></p>
                        
                        <div class="risk-factors">
                            <div class="risk-factors-title">
                                <i class="fas fa-exclamation-circle"></i> Factores de Riesgo Identificados
                            </div>
                            <div class="risk-factors-list" id="riskFactorsList">
                                <!-- Factores de riesgo se agregarán aquí -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="recommendations">
                    <h3><i class="fas fa-clipboard-list"></i> Recomendaciones Clínicas</h3>
                    <ul id="recommendationsList">
                        <!-- Las recomendaciones se llenarán con JavaScript -->
                    </ul>
                </div>
                
                <div class="patient-summary">
                    <h3><i class="fas fa-file-medical"></i> Resumen Clínico del Paciente</h3>
                    <div class="summary-grid" id="patientSummary">
                        <!-- Los datos del paciente se llenarán aquí -->
                    </div>
                </div>
                
                <div class="clinical-guidelines">
                    <h3><i class="fas fa-book-medical"></i> Guías Clínicas Aplicables</h3>
                    
                    <div class="guideline">
                        <div class="guideline-title">
                            <i class="fas fa-check-circle"></i> ASRM (American Society for Reproductive Medicine)
                        </div>
                        <div class="guideline-content" id="asrmGuideline">
                            Criterios de clasificación de endometriosis basados en hallazgos quirúrgicos.
                        </div>
                    </div>
                    
                    <div class="guideline">
                        <div class="guideline-title">
                            <i class="fas fa-check-circle"></i> ESHRE (European Society of Human Reproduction and Embryology)
                        </div>
                        <div class="guideline-content" id="eshreGuideline">
                            Guías para el manejo de mujeres con endometriosis.
                        </div>
                    </div>
                    
                    <div class="guideline">
                        <div class="guideline-title">
                            <i class="fas fa-check-circle"></i> NICE (National Institute for Health and Care Excellence)
                        </div>
                        <div class="guideline-content" id="niceGuideline">
                            Recomendaciones para el diagnóstico y tratamiento de endometriosis.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>&copy; 2025 SITME - Sistema Integral de Tamizaje Multimodal para Endometriosis.</p>
            <p>Este sistema no sustituye el juicio clínico profesional. Consulte siempre a un especialista.</p>
            <div class="footer-links">
                <!-- <a href="../status.html"><i class="fas fa-server text-success blink"></i> Status</a> -->
            </div>
        </footer>
    </div>
    <script src="../static/script.js"></script>
</body>
</html>